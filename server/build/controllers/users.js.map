{"version":3,"sources":["../../server/controllers/users.js"],"names":["_","require","User","signup","req","res","username","body","toLowerCase","email","create","password","then","user","createdUser","id","createdAt","updatedAt","status","send","catch","err","signin","pick","findOne","attributes","exclude","where","module","exports"],"mappings":";;AAAA,IAAMA,IAAIC,QAAQ,QAAR,CAAV;;AAEA,IAAMC,OAAOD,QAAQ,WAAR,EAAqBC,IAAlC;;AAEA,IAAMC,SAAS,SAATA,MAAS,CAACC,GAAD,EAAMC,GAAN,EAAc;AAC3B,MAAMC,WAAWF,IAAIG,IAAJ,CAASD,QAAT,CAAkBE,WAAlB,EAAjB;AACA,MAAMC,QAAQL,IAAIG,IAAJ,CAASE,KAAT,CAAeD,WAAf,EAAd;AACAN,OAAKQ,MAAL,CAAY;AACVJ,sBADU;AAEVK,cAAUP,IAAIG,IAAJ,CAASI,QAFT;AAGVF;AAHU,GAAZ,EAKCG,IALD,CAKM,UAACC,IAAD,EAAU;AACd,QAAMC,cAAc;AAClBC,UAAIF,KAAKE,EADS;AAElBT,gBAAUO,KAAKP,QAFG;AAGlBG,aAAOI,KAAKJ,KAHM;AAIlBO,iBAAWH,KAAKG,SAJE;AAKlBC,iBAAWJ,KAAKI;AALE,KAApB;AAOAZ,QAAIa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,WAArB;AACD,GAdD,EAeCM,KAfD,CAeO;AAAA,WAAOf,IAAIa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBE,GAArB,CAAP;AAAA,GAfP;AAgBD,CAnBD;;AAqBA,IAAMC,SAAS,SAATA,MAAS,CAAClB,GAAD,EAAMC,GAAN,EAAc;AAC3B,MAAME,OAAOP,EAAEuB,IAAF,CAAOnB,IAAIG,IAAX,EAAiB,CAAC,UAAD,EAAa,UAAb,CAAjB,CAAb;AACAL,OAAKsB,OAAL,CAAa;AACXC,gBAAY;AACVC,eAAS,CAAC,UAAD;AADC,KADD;AAIXC,WAAO,EAAErB,UAAUC,KAAKD,QAAL,CAAcE,WAAd,EAAZ,EAAyCG,UAAUJ,KAAKI;AAAxD;AAJI,GAAb,EAOCC,IAPD,CAOM,UAACC,IAAD,EAAU;AACd,QAAI,CAACA,IAAL,EAAW;AACT,aAAOR,IAAIa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB,CAAP;AACD;AACDd,QAAIa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBN,IAArB;AACD,GAZD,EAYGO,KAZH,CAYS;AAAA,WAAOf,IAAIa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBE,GAArB,CAAP;AAAA,GAZT;AAaD,CAfD;;AAiBAO,OAAOC,OAAP,GAAiB;AACf1B,gBADe;AAEfmB;AAFe,CAAjB","file":"users.js","sourcesContent":["const _ = require('lodash');\n\nconst User = require('../models').User;\n\nconst signup = (req, res) => {\n  const username = req.body.username.toLowerCase();\n  const email = req.body.email.toLowerCase();\n  User.create({\n    username,\n    password: req.body.password,\n    email,\n  })\n  .then((user) => {\n    const createdUser = {\n      id: user.id,\n      username: user.username,\n      email: user.email,\n      createdAt: user.createdAt,\n      updatedAt: user.updatedAt\n    };\n    res.status(201).send(createdUser);\n  })\n  .catch(err => res.status(400).send(err));\n};\n\nconst signin = (req, res) => {\n  const body = _.pick(req.body, ['username', 'password']);\n  User.findOne({\n    attributes: {\n      exclude: ['password']\n    },\n    where: { username: body.username.toLowerCase(), password: body.password\n    },\n  })\n  .then((user) => {\n    if (!user) {\n      return res.status(401).send({});\n    }\n    res.status(201).send(user);\n  }).catch(err => res.status(400).send(err));\n};\n\nmodule.exports = {\n  signup,\n  signin\n};\n"]}