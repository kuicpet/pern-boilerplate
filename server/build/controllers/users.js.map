{"version":3,"sources":["../../server/controllers/users.js"],"names":["_","require","User","signup","req","res","username","body","toLowerCase","email","create","password","then","status","send","user","catch","err","signin","pick","findOne","attributes","exclude","where","module","exports"],"mappings":";;AAAA,IAAMA,IAAIC,QAAQ,QAAR,CAAV;;AAEA,IAAMC,OAAOD,QAAQ,WAAR,EAAqBC,IAAlC;;AAEA,IAAMC,SAAS,SAATA,MAAS,CAACC,GAAD,EAAMC,GAAN,EAAc;AAC3B,MAAMC,WAAWF,IAAIG,IAAJ,CAASD,QAAT,CAAkBE,WAAlB,EAAjB;AACA,MAAMC,QAAQL,IAAIG,IAAJ,CAASE,KAAT,CAAeD,WAAf,EAAd;AACAN,OAAKQ,MAAL,CAAY;AACVJ,sBADU;AAEVK,cAAUP,IAAIG,IAAJ,CAASI,QAFT;AAGVF;AAHU,GAAZ,EAKCG,IALD,CAKM;AAAA,WAAQP,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,IAArB,CAAR;AAAA,GALN,EAMCC,KAND,CAMO;AAAA,WAAOX,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,GAArB,CAAP;AAAA,GANP;AAOD,CAVD;;AAYA,IAAMC,SAAS,SAATA,MAAS,CAACd,GAAD,EAAMC,GAAN,EAAc;AAC3B,MAAME,OAAOP,EAAEmB,IAAF,CAAOf,IAAIG,IAAX,EAAiB,CAAC,UAAD,EAAa,UAAb,CAAjB,CAAb;AACAL,OAAKkB,OAAL,CAAa;AACXC,gBAAY;AACVC,eAAS,CAAC,UAAD;AADC,KADD;AAIXC,WAAO,EAAEjB,UAAUC,KAAKD,QAAL,CAAcE,WAAd,EAAZ,EAAyCG,UAAUJ,KAAKI;AAAxD;AAJI,GAAb,EAOCC,IAPD,CAOM,UAACG,IAAD,EAAU;AACd,QAAI,CAACA,IAAL,EAAW;AACT,aAAOV,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB,CAAP;AACD;AACDT,QAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,IAArB;AACD,GAZD,EAYGC,KAZH,CAYS;AAAA,WAAOX,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,GAArB,CAAP;AAAA,GAZT;AAaD,CAfD;;AAiBAO,OAAOC,OAAP,GAAiB;AACftB,gBADe;AAEfe;AAFe,CAAjB","file":"users.js","sourcesContent":["const _ = require('lodash');\n\nconst User = require('../models').User;\n\nconst signup = (req, res) => {\n  const username = req.body.username.toLowerCase();\n  const email = req.body.email.toLowerCase();\n  User.create({\n    username,\n    password: req.body.password,\n    email,\n  })\n  .then(user => res.status(201).send(user))\n  .catch(err => res.status(400).send(err));\n};\n\nconst signin = (req, res) => {\n  const body = _.pick(req.body, ['username', 'password']);\n  User.findOne({\n    attributes: {\n      exclude: ['password']\n    },\n    where: { username: body.username.toLowerCase(), password: body.password\n    },\n  })\n  .then((user) => {\n    if (!user) {\n      return res.status(401).send({});\n    }\n    res.status(201).send(user);\n  }).catch(err => res.status(400).send(err));\n};\n\nmodule.exports = {\n  signup,\n  signin\n};\n"]}